import{q as M,u as N,a as S,b as z,d as U}from"./dept-c81d3711.js";import{d as D,r as c,i as R,q as j,a as i,o as G,c as H,e as _,b as t,w as a,k as d,l as k,F as J,f as p,p as K,h as L,g as m,E as O,_ as P}from"./index-de6d9716.js";import"./request-24d06a0f.js";import"./loginEmp-cb0c9dd4.js";const x=f=>(K("data-v-939d73c7"),f=f(),L(),f),Q=x(()=>_("div",{id:"title"},"部门管理",-1)),W=x(()=>_("br",null,null,-1)),X=x(()=>_("br",null,null,-1)),Y={class:"dialog-footer"},Z=D({__name:"index",setup(f){let w=c([]),o=c(!1),g=c(""),r=c({name:""});R(()=>{y()});const y=async()=>{const l=await M();w.value=l.data},C=()=>{o.value=!0,g.value="新增部门",r.value={name:""}},V=j({name:[{required:!0,message:"请输入部门名称",trigger:"blur"},{min:2,max:10,message:"部门名称的长度在2-10之间",trigger:"blur"}]}),b=l=>{l&&l.resetFields()},u=c(),A=async l=>{l&&l.validate(async e=>{if(e){let n;r.value.id?n=await N(r.value):n=await S(r.value),n.code?m.success("操作成功"):m.error(n.msg),o.value=!1,y()}})},F=async l=>{o.value=!0,g.value="修改部门",r.value={name:""};const e=await z(l);r.value=e.data},h=l=>{O.confirm("您确认删除此数据吗?","删除部门",{confirmButtonText:"确认",cancelButtonText:"取消",type:"warning"}).then(async()=>{let e=await U(l);e.code?(m.success("删除成功"),y()):m.error(e.msg)}).catch(()=>{m.info("取消删除")})};return(l,e)=>{const n=i("el-button"),v=i("el-table-column"),q=i("el-table"),B=i("el-input"),I=i("el-form-item"),T=i("el-form"),E=i("el-dialog");return G(),H(J,null,[_("div",null,[Q,t(n,{type:"primary",style:{float:"right"},onClick:e[0]||(e[0]=s=>{C(),b(u.value)})},{default:a(()=>[p("新增")]),_:1}),W,X]),t(q,{data:d(w),border:"",style:{width:"100%"},fit:""},{default:a(()=>[t(v,{type:"index",label:"序号",width:"150px",align:"center"}),t(v,{prop:"name",label:"部门名称",align:"center"}),t(v,{prop:"updateTime",label:"最后修改时间",align:"center"}),t(v,{label:"操作",align:"center"},{default:a(s=>[t(n,{type:"primary",size:"small",onClick:$=>{F(s.row.id),b(u.value)}},{default:a(()=>[p("修改")]),_:2},1032,["onClick"]),t(n,{type:"danger",size:"small",onClick:$=>h(s.row.id)},{default:a(()=>[p("删除")]),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"]),t(E,{modelValue:d(o),"onUpdate:modelValue":e[4]||(e[4]=s=>k(o)?o.value=s:o=s),title:d(g),"align-center":"",width:"30%"},{footer:a(()=>[_("span",Y,[t(n,{onClick:e[2]||(e[2]=s=>{k(o)?o.value=!1:o=!1,b(u.value)})},{default:a(()=>[p("取消")]),_:1}),t(n,{type:"primary",onClick:e[3]||(e[3]=s=>A(u.value))},{default:a(()=>[p("保存")]),_:1})])]),default:a(()=>[t(T,{model:d(r),rules:V,ref_key:"deptForm",ref:u},{default:a(()=>[t(I,{label:"部门名称","label-width":"80px",prop:"name"},{default:a(()=>[t(B,{modelValue:d(r).name,"onUpdate:modelValue":e[1]||(e[1]=s=>d(r).name=s),autocomplete:"off"},null,8,["modelValue"])]),_:1})]),_:1},8,["model","rules"])]),_:1},8,["modelValue","title"])],64)}}});const oe=P(Z,[["__scopeId","data-v-939d73c7"]]);export{oe as default};
