import{r as B}from"./request-24d06a0f.js";import{c as ie}from"./clazz-531238af.js";import{d as pe,r as i,i as me,a as c,o as u,c as p,b as l,w as t,k as n,l as G,F as C,E as N,g as h,m as I,f as y,t as ge,e as x,p as ce,h as fe,n as U,_ as _e}from"./index-de6d9716.js";import"./loginEmp-cb0c9dd4.js";const ve=(s,k,T,D,m)=>B.get(`/students?clazzId=${s}&degree=${k}&name=${T}&page=${D}&pageSize=${m}`),be=s=>B.post("/students",s),we=s=>B.get(`/students/${s}`),he=s=>B.put("/students",s),H=s=>B.delete(`/students/${s}`),ye=(s,k)=>B.put(`/students/violation/${s}/${k}`),P=s=>(ce("data-v-48fcfd77"),s=s(),fe(),s),Ve=P(()=>x("div",null,[x("div",{id:"title"},"学员管理"),x("br")],-1)),ze=P(()=>x("br",null,null,-1)),Ce=P(()=>x("br",null,null,-1)),xe={key:0},ke={key:1},Se={key:2},$e={key:3},Ie={key:4},Ue={key:5},Be={key:6},qe=P(()=>x("br",null,null,-1)),Ae={class:"dialog-footer"},Pe=pe({__name:"index",setup(s){const k=i([{name:"初中",value:1},{name:"高中",value:2},{name:"大专",value:3},{name:"本科",value:4},{name:"硕士",value:5},{name:"博士",value:6}]),T=i([{name:"男",value:1},{name:"女",value:2}]),D=i([{name:"是",value:1},{name:"否",value:0}]);let m=i({clazzId:"",degree:"",name:""}),Y=i([]);me(()=>{V(),J()});let M=i([]);const J=async()=>{let o=await ie();o.code&&(M.value=o.data)};let R=i([]);const K=o=>{R.value=o.map(a=>a.id)},_=i({currentPage:1,pageSize:10,total:0}),O=o=>{_.value.pageSize=o,V()},Q=o=>{_.value.currentPage=o,V()},V=async()=>{const o=await ve(m.value.clazzId,m.value.degree,m.value.name,_.value.currentPage,_.value.pageSize);o.code&&(Y.value=o.data.rows,_.value.total=o.data.total)},X=()=>{m.value={clazzId:"",degree:"",name:""},V()};let v=i(!1),b=i(100),E=i(""),d=i({name:"",no:"",gender:"",phone:"",idCard:"",isCollege:"",address:"",degree:"",graduationDate:"",clazzId:""});const j=()=>{d.value={name:"",no:"",gender:"",phone:"",idCard:"",isCollege:"",address:"",degree:"",graduationDate:"",clazzId:""}},Z=()=>{v.value=!0,E.value="新增学员",j()},ee=async o=>{j(),v.value=!0,E.value="修改学员";let a=await we(o);a.code&&(d.value=a.data)},q=i(),le=i({name:[{required:!0,message:"姓名为必填项",trigger:"blur"},{min:2,max:10,message:"姓名长度为2-20个字",trigger:"blur"}],no:[{required:!0,message:"学号为必填项",trigger:"blur"},{min:10,max:10,message:"学号长度为10个字",trigger:"blur"}],gender:[{required:!0,message:"性别为必填项",trigger:"change"}],phone:[{required:!0,message:"手机号为必填项",trigger:"blur"},{pattern:/^1[3-9]\d{9}$/g,message:"请输入合法的手机号",trigger:"blur"}],idCard:[{required:!0,message:"身份证号为必填项",trigger:"blur"},{pattern:/^\d{18}$/g,message:"请输入合法的身份证号",trigger:"blur"}],isCollege:[{required:!0,message:"是否院校学员为必填项",trigger:"change"}]}),F=o=>{o&&o.resetFields()},ae=o=>{o&&o.validate(async a=>{if(a){let g;d.value.id?g=he(d.value):g=be(d.value);let r=await g;r.code?(h.success("操作成功"),v.value=!1,V()):h.error(r.msg)}else return!1})},te=async o=>{N.confirm("您确认删除此数据吗?","删除学生",{confirmButtonText:"确认",cancelButtonText:"取消",type:"warning"}).then(async()=>{let a=await H(`${o}`);a.code?(h.success("删除成功"),V()):h.error(a.msg)}).catch(()=>{h.info("取消删除")})},ne=async()=>{N.confirm("您确认删除此数据吗?","删除学生",{confirmButtonText:"确认",cancelButtonText:"取消",type:"warning"}).then(async()=>{let o=await H(R.value.join(","));o.code?(h.success("删除成功"),V()):h.error(o.msg)}).catch(()=>{h.info("取消删除")})},oe=o=>{N.prompt("请输入违纪扣分","提示",{confirmButtonText:"确认",cancelButtonText:"取消",inputPattern:/\d?/,inputErrorMessage:"数据无效"}).then(async a=>{let g=await ye(o,a.value);g.code?(h.success("处理成功"),V()):h.error(g.msg)})};return(o,a)=>{const g=c("el-input"),r=c("el-form-item"),S=c("el-option"),$=c("el-select"),z=c("el-button"),L=c("el-form"),f=c("el-table-column"),de=c("el-table"),ue=c("el-pagination"),w=c("el-col"),A=c("el-row"),re=c("el-date-picker"),se=c("el-dialog");return u(),p(C,null,[Ve,l(L,{inline:!0,model:n(m),class:"demo-form-inline"},{default:t(()=>[l(r,{label:"姓名"},{default:t(()=>[l(g,{modelValue:n(m).name,"onUpdate:modelValue":a[0]||(a[0]=e=>n(m).name=e),placeholder:"请输入学生姓名"},null,8,["modelValue"])]),_:1}),l(r,{label:"最高学历"},{default:t(()=>[l($,{modelValue:n(m).degree,"onUpdate:modelValue":a[1]||(a[1]=e=>n(m).degree=e),placeholder:"请选择"},{default:t(()=>[(u(!0),p(C,null,I(k.value,e=>(u(),U(S,{label:e.name,value:e.value},null,8,["label","value"]))),256))]),_:1},8,["modelValue"])]),_:1}),l(r,{label:"所属班级"},{default:t(()=>[l($,{modelValue:n(m).clazzId,"onUpdate:modelValue":a[2]||(a[2]=e=>n(m).clazzId=e),placeholder:"请选择"},{default:t(()=>[(u(!0),p(C,null,I(n(M),e=>(u(),U(S,{label:e.name,value:e.id},null,8,["label","value"]))),256))]),_:1},8,["modelValue"])]),_:1}),l(r,null,{default:t(()=>[l(z,{type:"primary",onClick:a[3]||(a[3]=e=>V())},{default:t(()=>[y("查询")]),_:1}),l(z,{type:"info",onClick:a[4]||(a[4]=e=>X())},{default:t(()=>[y("清空")]),_:1})]),_:1})]),_:1},8,["model"]),l(z,{type:"success",onClick:a[5]||(a[5]=e=>{Z(),F(q.value)})},{default:t(()=>[y("+ 新增学员")]),_:1}),l(z,{type:"danger",onClick:a[6]||(a[6]=e=>ne())},{default:t(()=>[y("- 批量删除")]),_:1}),ze,Ce,l(de,{data:n(Y),border:"",style:{width:"100%"},fit:"",onSelectionChange:K},{default:t(()=>[l(f,{type:"selection",align:"center",width:"35"}),l(f,{prop:"name",label:"姓名",align:"center",width:"100px"}),l(f,{prop:"no",label:"学号",align:"center",width:"130px"}),l(f,{prop:"clazzName",label:"班级",align:"center",width:"160px"}),l(f,{prop:"gender",label:"性别",align:"center",width:"70px"},{default:t(e=>[y(ge(e.row.gender==1?"男":"女"),1)]),_:1}),l(f,{prop:"phone",label:"手机号",align:"center",width:"130px"}),l(f,{prop:"degree",label:"最高学历",align:"center",width:"90px"},{default:t(e=>[e.row.degree==1?(u(),p("span",xe,"初中")):e.row.degree==2?(u(),p("span",ke,"高中")):e.row.degree==3?(u(),p("span",Se,"大专")):e.row.degree==4?(u(),p("span",$e,"本科")):e.row.degree==5?(u(),p("span",Ie,"硕士")):e.row.degree==6?(u(),p("span",Ue,"博士")):(u(),p("span",Be,"其他"))]),_:1}),l(f,{prop:"violationCount",label:"违纪次数",align:"center",width:"85px"}),l(f,{prop:"violationScore",label:"违纪扣分",align:"center",width:"85px"}),l(f,{prop:"updateTime",label:"最后修改时间",align:"center",width:"170px"}),l(f,{label:"操作",align:"center"},{default:t(e=>[l(z,{type:"primary",size:"small",onClick:W=>{ee(e.row.id),F(q.value)}},{default:t(()=>[y("编辑")]),_:2},1032,["onClick"]),l(z,{type:"warning",size:"small",onClick:W=>oe(e.row.id)},{default:t(()=>[y("违纪")]),_:2},1032,["onClick"]),l(z,{type:"danger",size:"small",onClick:W=>te(e.row.id)},{default:t(()=>[y("删除")]),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"]),qe,l(ue,{"current-page":_.value.currentPage,"onUpdate:currentPage":a[7]||(a[7]=e=>_.value.currentPage=e),"page-size":_.value.pageSize,"onUpdate:pageSize":a[8]||(a[8]=e=>_.value.pageSize=e),"page-sizes":[5,10,20,50,100],layout:"total, sizes, prev, pager, next, jumper",total:_.value.total,onSizeChange:O,onCurrentChange:Q},null,8,["current-page","page-size","total"]),l(se,{modelValue:n(v),"onUpdate:modelValue":a[21]||(a[21]=e=>G(v)?v.value=e:v=e),title:n(E),width:"50%"},{footer:t(()=>[x("span",Ae,[l(z,{onClick:a[19]||(a[19]=e=>{G(v)?v.value=!1:v=!1,F(q.value)})},{default:t(()=>[y("取消")]),_:1}),l(z,{type:"primary",onClick:a[20]||(a[20]=e=>ae(q.value))},{default:t(()=>[y("保存")]),_:1})])]),default:t(()=>[l(L,{model:n(d),ref_key:"stuFormRef",ref:q,rules:le.value},{default:t(()=>[l(A,null,{default:t(()=>[l(w,{span:12},{default:t(()=>[l(r,{label:"姓名","label-width":n(b),prop:"name"},{default:t(()=>[l(g,{modelValue:n(d).name,"onUpdate:modelValue":a[9]||(a[9]=e=>n(d).name=e),placeholder:"请输入学员姓名"},null,8,["modelValue"])]),_:1},8,["label-width"])]),_:1}),l(w,{span:12},{default:t(()=>[l(r,{label:"学号","label-width":n(b),prop:"no"},{default:t(()=>[l(g,{modelValue:n(d).no,"onUpdate:modelValue":a[10]||(a[10]=e=>n(d).no=e),placeholder:"请输入学员学号"},null,8,["modelValue"])]),_:1},8,["label-width"])]),_:1})]),_:1}),l(A,null,{default:t(()=>[l(w,{span:12},{default:t(()=>[l(r,{label:"性别","label-width":n(b),prop:"gender"},{default:t(()=>[l($,{modelValue:n(d).gender,"onUpdate:modelValue":a[11]||(a[11]=e=>n(d).gender=e),placeholder:"请选择",style:{width:"100%"}},{default:t(()=>[(u(!0),p(C,null,I(T.value,e=>(u(),U(S,{label:e.name,value:e.value},null,8,["label","value"]))),256))]),_:1},8,["modelValue"])]),_:1},8,["label-width"])]),_:1}),l(w,{span:12},{default:t(()=>[l(r,{label:"手机号","label-width":n(b),prop:"phone"},{default:t(()=>[l(g,{modelValue:n(d).phone,"onUpdate:modelValue":a[12]||(a[12]=e=>n(d).phone=e),placeholder:"请输入手机号"},null,8,["modelValue"])]),_:1},8,["label-width"])]),_:1})]),_:1}),l(A,null,{default:t(()=>[l(w,{span:12},{default:t(()=>[l(r,{label:"身份证号","label-width":n(b),prop:"idCard"},{default:t(()=>[l(g,{modelValue:n(d).idCard,"onUpdate:modelValue":a[13]||(a[13]=e=>n(d).idCard=e),placeholder:"请输入身份证号"},null,8,["modelValue"])]),_:1},8,["label-width"])]),_:1}),l(w,{span:12},{default:t(()=>[l(r,{label:"是否院校","label-width":n(b),prop:"isCollege"},{default:t(()=>[l($,{modelValue:n(d).isCollege,"onUpdate:modelValue":a[14]||(a[14]=e=>n(d).isCollege=e),placeholder:"请选择",style:{width:"100%"}},{default:t(()=>[(u(!0),p(C,null,I(D.value,e=>(u(),U(S,{label:e.name,value:e.value},null,8,["label","value"]))),256))]),_:1},8,["modelValue"])]),_:1},8,["label-width"])]),_:1})]),_:1}),l(A,null,{default:t(()=>[l(w,{span:12},{default:t(()=>[l(r,{label:"联系地址","label-width":n(b)},{default:t(()=>[l(g,{modelValue:n(d).address,"onUpdate:modelValue":a[15]||(a[15]=e=>n(d).address=e),placeholder:"请输入联系地址"},null,8,["modelValue"])]),_:1},8,["label-width"])]),_:1}),l(w,{span:12},{default:t(()=>[l(r,{label:"最高学历","label-width":n(b)},{default:t(()=>[l($,{modelValue:n(d).degree,"onUpdate:modelValue":a[16]||(a[16]=e=>n(d).degree=e),placeholder:"请选择",style:{width:"100%"}},{default:t(()=>[(u(!0),p(C,null,I(k.value,e=>(u(),U(S,{label:e.name,value:e.value},null,8,["label","value"]))),256))]),_:1},8,["modelValue"])]),_:1},8,["label-width"])]),_:1})]),_:1}),l(A,null,{default:t(()=>[l(w,{span:12},{default:t(()=>[l(r,{label:"毕业时间","label-width":n(b)},{default:t(()=>[l(re,{modelValue:n(d).graduationDate,"onUpdate:modelValue":a[17]||(a[17]=e=>n(d).graduationDate=e),type:"date",placeholder:"请选择毕业时间","value-format":"YYYY-MM-DD",style:{width:"100%"}},null,8,["modelValue"])]),_:1},8,["label-width"])]),_:1}),l(w,{span:12},{default:t(()=>[l(r,{label:"所属班级","label-width":n(b)},{default:t(()=>[l($,{modelValue:n(d).clazzId,"onUpdate:modelValue":a[18]||(a[18]=e=>n(d).clazzId=e),placeholder:"请选择",style:{width:"100%"}},{default:t(()=>[(u(!0),p(C,null,I(n(M),e=>(u(),U(S,{label:e.name,value:e.id},null,8,["label","value"]))),256))]),_:1},8,["modelValue"])]),_:1},8,["label-width"])]),_:1})]),_:1})]),_:1},8,["model","rules"])]),_:1},8,["modelValue","title"])],64)}}});const Fe=_e(Pe,[["__scopeId","data-v-48fcfd77"]]);export{Fe as default};
