import{r as S}from"./request-24d06a0f.js";import{d as y,r as m,i as C,a as p,o as u,c as k,b as a,w as r,k as N,F as B,e as s,t as g,n as h,f,p as I,h as V,_ as q}from"./index-de6d9716.js";import"./loginEmp-cb0c9dd4.js";const T=(l,i)=>S.get(`/log/page?page=${l}&pageSize=${i}`),v=l=>(I("data-v-5ac6836f"),l=l(),V(),l),D=v(()=>s("div",null,[s("div",{id:"title"},"日志管理"),s("br")],-1)),E=v(()=>s("br",null,null,-1)),F=y({__name:"index",setup(l){let i=m([]);C(()=>{d()});const e=m({currentPage:1,pageSize:15,total:0}),b=t=>{e.value.pageSize=t,d()},w=t=>{e.value.currentPage=t,d()},d=async()=>{const t=await T(e.value.currentPage,e.value.pageSize);t.code&&(i.value=t.data.rows,e.value.total=t.data.total)};return(t,c)=>{const n=p("el-table-column"),_=p("el-tag"),x=p("el-popover"),z=p("el-table"),P=p("el-pagination");return u(),k(B,null,[D,a(z,{data:N(i),border:"",style:{width:"100%"},fit:"",size:"small"},{default:r(()=>[a(n,{prop:"operateEmpName",label:"操作人",align:"center",width:"80px"}),a(n,{prop:"operateTime",label:"操作时间",align:"center",width:"150px"}),a(n,{prop:"className",label:"类名",align:"center",width:"300px"}),a(n,{prop:"methodName",label:"方法名",align:"center",width:"100px"}),a(n,{prop:"costTime",label:"操作耗时(ms)",align:"center",width:"100px"}),a(n,{prop:"methodParams",label:"请求参数",align:"center",width:"280px"},{default:r(o=>[a(x,{effect:"light",trigger:"hover",placement:"top",width:"auto","popper-style":"font-size:12px"},{default:r(()=>[s("div",null,"参数: "+g(o.row.methodParams),1)]),reference:r(()=>[o.row.methodParams.length<=30?(u(),h(_,{key:0},{default:r(()=>[f(g(o.row.methodParams),1)]),_:2},1024)):(u(),h(_,{key:1},{default:r(()=>[f(g(o.row.methodParams.substring(0,30)+"..."),1)]),_:2},1024))]),_:2},1024)]),_:1}),a(n,{prop:"returnValue",label:"返回值",align:"center"})]),_:1},8,["data"]),E,a(P,{"current-page":e.value.currentPage,"onUpdate:currentPage":c[0]||(c[0]=o=>e.value.currentPage=o),"page-size":e.value.pageSize,"onUpdate:pageSize":c[1]||(c[1]=o=>e.value.pageSize=o),"page-sizes":[10,20,50,100],layout:"total, sizes, prev, pager, next, jumper",total:e.value.total,onSizeChange:b,onCurrentChange:w},null,8,["current-page","page-size","total"])],64)}}});const A=q(F,[["__scopeId","data-v-5ac6836f"]]);export{A as default};
